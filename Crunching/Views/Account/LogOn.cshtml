@model Crunching.Models.LogOnModel

@{
    ViewBag.Title = "Log On";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>Login - GTP ToolBox</title>

		<meta name="description" content="overview &amp; stats" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<!--basic styles-->

        <link href="@Url.Content("~/assets/css/bootstrap.min.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/assets/css/bootstrap-responsive.min.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/assets/css/font-awesome.min.css")" rel="stylesheet" type="text/css" />

		<!--[if IE 7]>
		  <link rel="stylesheet" type="text/css" href="@Url.Content("~/assets/css/font-awesome-ie7.min.css")" />
		<![endif]-->

		<!--page specific plugin styles-->

		<!--fonts-->
        <link href="@Url.Content("~/assets/css/ace-fonts.css")" rel="stylesheet" type="text/css" />
		<!--ace styles-->
        <link href="@Url.Content("~/assets/css/ace.min.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/assets/css/ace-responsive.min.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/assets/css/ace-skins.min.css")" rel="stylesheet" type="text/css" />

		<!--[if lte IE 8]>
            <link rel="stylesheet" type="text/css" href="@Url.Content("~/assets/css/ace-ie.min.css")" />
		<![endif]-->

		<!--inline styles related to this page-->

		<!--ace settings handler-->
        <script src="@Url.Content("~/assets/js/ace-extra.min.js")" type="text/javascript"></script>

        <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

	</head>

	<body class="login-layout">
		<div class="main-container container-fluid">
			<div class="main-content">
				<div class="row-fluid">
					<div class="span12">
						<div class="login-container">
							<div class="space-32"></div>
                            <div class="space-32"></div>

							<div class="row-fluid">
								<div class="position-relative">
									<div id="login-box" class="login-box visible widget-box no-border">
										<div class="widget-body">
											<div class="widget-main">
                                                @Html.ValidationSummary(true, "Login was unsuccessful. Please correct the errors and try again.")
                                          <!--      <img src="@Url.Content("~/Content/img/FlowBrushLogo.png")" />-->
												<h4 class="header blue lighter bigger">
													Please Enter Your Information
												</h4>

												<div class="space-6"></div>

												@using (Html.BeginForm())
                                                {
													<fieldset>
														<label>
															<span class="block input-icon input-icon-right">
																@Html.TextBoxFor(m => m.UserName, new {@class="span12", placeholder="Email"})
                                                                <i class="icon-user"></i>
                                                                @Html.ValidationMessageFor(m => m.UserName)
																
															</span>
														</label>

														<label>
															<span class="block input-icon input-icon-right">
																@Html.PasswordFor(m => m.Password, new { @class = "span12", placeholder = "Password" })
                                                                <i class="icon-lock"></i>
                                                                @Html.ValidationMessageFor(m => m.Password)
																
															</span>
														</label>

														<div class="space"></div>

														<div class="clearfix">
                                                            <label class="inline">
																@Html.CheckBoxFor(m => m.RememberMe)
																<span class="lbl"> Remember Me</span>
															</label>
															<button onclick="javascript:document.forms[0].submit()" class="width-35 pull-right btn btn-small btn-primary">
																<i class="icon-key"></i>
																Login
															</button>
														</div>

														<div class="space-4"></div>
													</fieldset>
                                                }
											</div><!--/widget-main-->

											<div class="toolbar clearfix ">
												<div >
													<a style="text-align:center" href="#" onclick="show_box('forgot-box'); return false;" class="forgot-password-link">
														<i class="icon-arrow-left"></i>
														I forgot my password
													</a>
												</div>
                                                <div>
													<a href="#" onclick="show_box('signup-box'); return false;" class="user-signup-link">
														I want to register
														<i class="icon-arrow-right"></i>
													</a>
												</div>

											</div>
										</div><!--/widget-body-->
									</div><!--/login-box-->

									<div id="forgot-box" class="forgot-box widget-box no-border">
										<div class="widget-body">
											<div class="widget-main">
                                                <!--<img src="@Url.Content("~/Content/img/FlowBrushLogo.png")" />-->
												<h4 class="header red lighter bigger">
													<i class="icon-key"></i>
													Reset password
												</h4>
                                                <p id="msg" name="msg" class="blue lighter"></p>
												<div class="space-6"></div>
												<p>
													 Please enter your Email
												</p>

												<form>
													<fieldset>
														<label>
															<span class="block input-icon input-icon-right">
																<input id="email" name="email" class="span12" placeholder="Email" />
																<i class="icon-mobile-phone"></i>
															</span>
														</label>

														<div class="clearfix">
															<button onclick="requestPasswordReset(); return false;" class="width-35 pull-right btn btn-small btn-danger">
																<i class="icon-lightbulb"></i>
																Send
															</button>
														</div>
													</fieldset>
												</form>
											</div><!--/widget-main-->

											<div class="toolbar center">
												<a href="#" onclick="show_box('login-box'); return false;" class="back-to-login-link">
													Back to login
													<i class="icon-arrow-right"></i>
												</a>
											</div>
										</div><!--/widget-body-->
									</div><!--/forgot-box-->
                                    <div id="signup-box" class="signup-box widget-box no-border">
										<div class="widget-body">
											<div class="widget-main">
												<h4 class="header green lighter bigger">
													<i class="icon-group blue"></i>
													New User Registration
												</h4>
                                                <p id="msgRegister" name="msgRegister" class="blue lighter"></p>
												<div class="space-6"></div>
												<p> Enter your details to begin: </p>

												<form>
													<fieldset>
                                                        <label>
															<span class="block input-icon input-icon-right">
																<select id="title" name="title"><option id="Mr">Mr.</option><option id="Mrs">Mrs.</option></select>
															</span>
														</label>
                                                        <label>
															<span class="block input-icon input-icon-right">
																<input type="text" id="firstName" name="firstName" class="span12" placeholder="First Name (mandatory)" />
															</span>
														</label>
                                                        <label>
															<span class="block input-icon input-icon-right">
																<input type="text" id="lastName" name="lastName" class="span12" placeholder="Last Name (mandatory)" />
															</span>
														</label>
														<label>
															<span class="block input-icon input-icon-right">
																<input type="text" id="emailRegister" name="emailRegister" class="span12" placeholder="Email (mandatory)" />
															</span>
														</label>
                                                        <label>
															<span class="block input-icon input-icon-right">
																<input type="text" id="company" name="company" class="span12" placeholder="Company" />
															</span>
														</label>
                                                        <label>
															<span class="block input-icon input-icon-right">
																<input type="text" id="position" name="position" class="span12" placeholder="Position" />
															</span>
														</label>
                                                        <label>
															<span class="block input-icon input-icon-right">
																<input type="text" id="phone" name="phone" class="span12" placeholder="Phone" />
															</span>
														</label>
														<label>
															<input type="checkbox" id="terms" name="terms" class="ace" />
															<span class="lbl">
																I accept the
																<a href="@Url.Action("Index", "Terms")" target="_blank">User Agreement</a>
															</span>
														</label>

														<div class="space-24"></div>

														<div class="clearfix">
															<button type="reset" class="width-30 pull-left btn btn-small">
																<i class="icon-refresh"></i>
																Reset
															</button>

															<button onclick="Register(); return false;" class="width-65 pull-right btn btn-small btn-success">
																Sign up
																<i class="icon-arrow-right icon-on-right"></i>
															</button>
														</div>
													</fieldset>
												</form>
											</div>

											<div class="toolbar center">
												<a href="#" onclick="show_box('login-box'); return false;" class="back-to-login-link">
													<i class="icon-arrow-left"></i>
													Back to login
												</a>
											</div>
										</div><!--/widget-body-->
									</div><!--/signup-box-->

								</div><!--/position-relative-->
							</div>
						</div>
					</div><!--/.span-->
				</div><!--/.row-fluid-->
			</div>
		</div><!--/.main-container-->

		<!--basic scripts-->

		<!--[if !IE]>-->

		<script type="text/javascript">
		    window.jQuery || document.write("<script src='@Url.Content("~/assets/js/jquery-2.0.3.min.js")'>" + "<" + "/script>");
		</script>

		<!--<![endif]-->

		<!--[if IE]>
        <script type="text/javascript">
         window.jQuery || document.write("<script src='@Url.Content("~/assets/js/jquery-1.10.2.min.js")'>"+"<"+"/script>");
        </script>
        <![endif]-->

		<script type="text/javascript">
		    if ("ontouchend" in document) document.write("<script src='@Url.Content("~/assets/js/jquery.mobile.custom.min.js")'>" + "<" + "/script>");
		</script>
		<script src="@Url.Content("~/assets/js/bootstrap.min.js")"></script>

		<!--page specific plugin scripts-->

        <script type="text/javascript">
            function requestPasswordReset() {
                $.ajax({
                    url: '@Url.Action("resendPasswordByEmail", "Users")',
                    type: 'POST',
                    data: { email: document.getElementById("email").value },
                    success: function (data) {
                        if (data == "1") $("#msg").html("Please check your Email inbox");
                        else $("#msg").html("No account found, please contact GTP.");
                        $("#email").html(data);
                    }
                    , error: function (xhr, status, err) {
                        if (xhr.status = 400) alert("Error, bad data in parameters = " + err + ". Please contact GTP.");
                        else alert("Error = " + xhr.status);
                    }
                });
            }
        </script>

        <script type="text/javascript">
            function Register() {
              //  alert(document.getElementById("terms").checked);
                $.ajax({
                    url: '@Url.Action("Register", "Users")',
                    type: 'POST',
                    data: { email: document.getElementById("emailRegister").value, 
                            firstName: document.getElementById("firstName").value,
                            lastName: document.getElementById("lastName").value,
                            title: document.getElementById("title").value,
                            company: document.getElementById("company").value,
                            position: document.getElementById("position").value,
                            phone: document.getElementById("phone").value,
                            terms: document.getElementById("terms").checked,
                    },
                    success: function (data) {
                        if (data == "1") document.location='@Url.Action("ThankYouForRegister", "Users")'; //$("#msgRegister").html("Please check your Email inbox");
                        else $("#msgRegister").html(data);
                        $("#email").html(data);
                    }
                    , error: function (xhr, status, err) {
                        if (xhr.status = 400) alert("Error, bad data in parameters = " + err + ". Please contact GTP.");
                        else alert("Error = " + xhr.status);
                    }
                });
            }
        </script>
		<!--ace scripts-->

		<script src="@Url.Content("~/assets/js/ace-elements.min.js")"></script>
		<script src="@Url.Content("~/assets/js/ace.min.js")"></script>

		<!--inline scripts related to this page-->

		<script type="text/javascript">
		    function show_box(id) {
		        jQuery('.widget-box.visible').removeClass('visible');
		        jQuery('#' + id).addClass('visible');
		    }
		</script>
        
	</body>
</html>

